{"remainingRequest":"C:\\工作\\learning\\vue-Project\\node-demo\\node-app\\client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\工作\\learning\\vue-Project\\node-demo\\node-app\\client\\src\\views\\FundList.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\工作\\learning\\vue-Project\\node-demo\\node-app\\client\\src\\views\\FundList.vue","mtime":1564983871549},{"path":"C:\\工作\\learning\\vue-Project\\node-demo\\node-app\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\工作\\learning\\vue-Project\\node-demo\\node-app\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\工作\\learning\\vue-Project\\node-demo\\node-app\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\工作\\learning\\vue-Project\\node-demo\\node-app\\client\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport DialogFound from \"../components/DialogFound\";\r\nexport default {\r\n    name:'fundlist',\r\n    data(){\r\n        return {\r\n            search_data:{\r\n                startTime:\"\",\r\n                endTime:\"\"\r\n            },\r\n            filerTableData:{},\r\n            paginations:{\r\n                page_index:1,//当前位于哪页\r\n                total:0,//当前数据总数\r\n                page_size:5,//一页显示多少条\r\n                page_sizes:[5,10,15,20],//每页显示多少条\r\n                layout:\"total,sizes,prev,pager,next,jumper\"//翻页属性\r\n            },\r\n            tableData:{},\r\n            allTableData:{},\r\n            formData:{\r\n            type:'',\r\n            describe:'',\r\n            income:'',\r\n            expend:'',\r\n            cash:'',\r\n            remark:'',\r\n            id:''\r\n         } ,\r\n            dialog:{\r\n                show:false,\r\n                title:\"\",\r\n                option:\"edit\"\r\n            }\r\n        };\r\n    },\r\n    computed:{\r\n        user(){\r\n            return  this.$store.getters.user;\r\n        }\r\n    },\r\n    components:{\r\n     DialogFound\r\n    },\r\n    created(){\r\n        this.getProfile();\r\n    },\r\n    methods:{\r\n    getProfile(){\r\n        //获取表格数据\r\n        this.$axios.get('/api/profiles')\r\n        .then(res=>{\r\n             this.allTableData=res.data;\r\n             this.filerTableData=res.data;\r\n             //设置分页数据\r\n             this.setPaginations();\r\n            //console.log(res)\r\n        })\r\n        .catch(err=>console.log(err));\r\n    },\r\n    handleEdit(index,row){\r\n        //编辑\r\n        this.dialog={\r\n            show:true,\r\n            title:\"修改基金信息\",\r\n            option:'edit'\r\n        }\r\n        this.formData={\r\n\r\n            type:row.type,\r\n            describe:row.describe,\r\n            income:row.income,\r\n            expend:row.expend,\r\n            cash:row.cash,\r\n            remark:row.remark,\r\n            id:row._id\r\n\r\n        }\r\n\r\n    },\r\n    handleDelete(index,row){\r\n        this.$axios.delete(`api/profiles/delete/${row._id}`).then((result)=>{\r\n                this.$message('删除成功');\r\n                this.getProfile();\r\n\r\n        })\r\n\r\n    },\r\n    AddMoney(){\r\n         this.dialog={\r\n            show:true,\r\n            title:\"添加基金信息\",\r\n            option:'add'\r\n        },\r\n        this.formData={\r\n\r\n            type:\"\",\r\n            describe:\"\",\r\n            income:\"\",\r\n            expend:\"\",\r\n            cash:\"\",\r\n            remark:\"\",\r\n            id:\"\"\r\n\r\n        }\r\n    },\r\n    handleSizeChange(page_size){\r\n        //切换size\r\n        this.paginations.page_index=1;\r\n        this.paginations.page_size=page_size;\r\n         this.tableData=this.allTableData.filter((item,index)=>{\r\n            return index <page_size;\r\n        })\r\n    },\r\n    handleCurrentChange(page){\r\n        //获取当前页\r\n        let index=this.paginations.page_size*(page-1);\r\n        //数据总数\r\n        let nums=this.paginations.page_size*page;\r\n        let tables=[];\r\n        for (let i =index;i<nums;i++){\r\n\r\n            if(this.allTableData[i]){\r\n                tables.push(this.allTableData[i]);\r\n            }\r\n            this.tableData=tables;\r\n        }\r\n    },\r\n    setPaginations(){\r\n        //分页属性设置\r\n        this.paginations.total=this.allTableData.length;\r\n        this.paginations.page_index=1;\r\n        this.paginations.page_size=5;\r\n        //设置默认分页数据\r\n        this.tableData=this.allTableData.filter((item,index)=>{\r\n            return index <this.paginations.page_size;\r\n        })\r\n\r\n    },\r\n    handleSearch(){\r\n        if(!this.search_data.startTime||!this.search_data.endTime){\r\n            this.$message({\r\n                type:\"warning\",\r\n                message:\"请选择时间区间\"\r\n            })\r\n            this.getProfile();\r\n            return;\r\n        };\r\n        const sTime=this.search_data.startTime.getTime();\r\n        const eTime=this.search_data.endTime.getTime();\r\n\r\n        this.allTableData=this.filerTableData.filter(item=>{\r\n\r\n            let date=new Date(item.date);\r\n            let  time=date.getTime();\r\n            return time >=sTime && time<=eTime;\r\n        });\r\n        //分页数据调用\r\n        this.setPaginations();\r\n\r\n    }\r\n    }\r\n    \r\n\r\n}\r\n\r\n",{"version":3,"sources":["FundList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA","file":"FundList.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n<div class=\"fillcontain\">\r\n    <div>\r\n        <el-form\r\n                :inline=\"true\"\r\n                ref=\"search_data\" \r\n                :model=\"search_data\"\r\n                >\r\n                <el-form-item label=\"投标时间筛选:\">\r\n                    <el-date-picker\r\n                        v-model=\"search_data.startTime\"\r\n                        type=\"datetime\"\r\n                        placeholder=\"选择开始时间\">\r\n                    </el-date-picker> --\r\n                    <el-date-picker\r\n                        v-model=\"search_data.endTime\"\r\n                        type=\"datetime\"\r\n                        placeholder=\"选择结束时间\">\r\n                    </el-date-picker>\r\n                </el-form-item>\r\n                <el-form-item>\r\n                    <el-button type=\"primary\" size =\"small\" icon=\"search\" @click='handleSearch()'>筛选</el-button>\r\n                </el-form-item>\r\n\r\n                 <el-form-item class=\"btnRight\">\r\n                    <el-button type=\"primary\" size =\"small\" icon=\"view\" v-if=\"user.identity=='manager'\" @click='AddMoney()'>添加</el-button>\r\n                </el-form-item>\r\n            </el-form>\r\n\r\n    </div>\r\n    <div class=\"table_contaniner\">\r\n \r\n        <el-table\r\n                v-if=\"tableData.length>0\"\r\n                :data=\"tableData\"\r\n                max-height=\"450\"\r\n                border\r\n                style=\"width: 100%\">\r\n                 <el-table-column\r\n                type=\"index\"\r\n                label=\"序号\"\r\n                align='center'\r\n                width=\"70\">   \r\n                </el-table-column>\r\n                <el-table-column\r\n                prop=\"date\"\r\n                label=\"创建时间\"\r\n                align='center'\r\n                width=\"250\">  \r\n                <template slot-scope=\"scope\">\r\n                        <el-icon name=\"time\"></el-icon>\r\n                        <span style=\"margin-left: 10px\">{{ scope.row.date }}</span>\r\n                    </template> \r\n                </el-table-column>\r\n                <el-table-column\r\n                    prop=\"type\"\r\n                    label=\"收支类型\"\r\n                    align='center'\r\n                    width=\"150\">\r\n                </el-table-column>\r\n                <el-table-column\r\n                    prop=\"describe\"\r\n                    label=\"收支描述\"\r\n                    align='center'\r\n                    width=\"170\">\r\n                </el-table-column>\r\n                <el-table-column\r\n                    prop=\"income\"\r\n                    label=\"收入\"\r\n                    align='center'\r\n                    width=\"170\"> \r\n                    <template slot-scope=\"scope\">  \r\n                        <span style=\"color:#00d053\">+ {{ scope.row.income }}</span>\r\n                    </template>\r\n                </el-table-column>\r\n                <el-table-column\r\n                    prop=\"expend\"\r\n                    label=\"支出\"\r\n                    align='center'\r\n                    width=\"170\">\r\n                    <template slot-scope=\"scope\">  \r\n                        <span style=\"color:#f56767\">- {{ scope.row.expend }}</span>\r\n                    </template>\r\n                </el-table-column>\r\n                <el-table-column\r\n                    prop=\"cash\"\r\n                    label=\"账户现金\"\r\n                    align='center'\r\n                    \r\n                    width=\"170\">\r\n                    <template slot-scope=\"scope\">  \r\n                        <span style=\"color:#4db3ff\">{{ scope.row.cash }}</span>\r\n                    </template>\r\n                </el-table-column>\r\n                 <el-table-column\r\n                    prop=\"remark\"\r\n                    label=\"备注\"\r\n                    align='center'\r\n                    width=\"220\">\r\n                </el-table-column>\r\n                <el-table-column \r\n                  prop=\"operation\"\r\n                  label=\"操作\" \r\n                  \r\n                  align='center'\r\n                  width=\"320\"\r\n                  v-if=\"user.identity=='manager'\">\r\n                 <template slot-scope=\"scope\">\r\n                    <el-button\r\n                    type=\"warning\"\r\n                    align='center'\r\n                     size=\"small\"\r\n                    @click=\"handleEdit(scope.$index, scope.row)\">编辑</el-button>\r\n                    <el-button\r\n                    align='center'\r\n                    size=\"small\"\r\n                    type=\"danger\"\r\n                    \r\n                     @click=\"handleDelete(scope.$index, scope.row)\">删除</el-button>\r\n                </template>\r\n                 </el-table-column>\r\n        </el-table>\r\n        <!-- 分页 -->\r\n        <el-row :span=\"24\">\r\n            <div class=\"pagination\">\r\n                <el-pagination\r\n                    @size-change=\"handleSizeChange\"\r\n                    @current-change=\"handleCurrentChange\"\r\n                    :current-page.sync=\"paginations.page_index\"\r\n                    :page-sizes=\"paginations.page_sizes\"\r\n                    :page-size=\"paginations.page_size\"\r\n                    :layout=\"paginations.layout\"\r\n                    :total=\"paginations.total\">\r\n                </el-pagination>\r\n            </div>\r\n            \r\n        </el-row>\r\n    </div>\r\n\r\n    <DialogFound :dialog=\"dialog\" :formData=\"formData\" @update=\"getProfile\"></DialogFound> \r\n    </div>\r\n</template>\r\n<script>\r\nimport DialogFound from \"../components/DialogFound\";\r\nexport default {\r\n    name:'fundlist',\r\n    data(){\r\n        return {\r\n            search_data:{\r\n                startTime:\"\",\r\n                endTime:\"\"\r\n            },\r\n            filerTableData:{},\r\n            paginations:{\r\n                page_index:1,//当前位于哪页\r\n                total:0,//当前数据总数\r\n                page_size:5,//一页显示多少条\r\n                page_sizes:[5,10,15,20],//每页显示多少条\r\n                layout:\"total,sizes,prev,pager,next,jumper\"//翻页属性\r\n            },\r\n            tableData:{},\r\n            allTableData:{},\r\n            formData:{\r\n            type:'',\r\n            describe:'',\r\n            income:'',\r\n            expend:'',\r\n            cash:'',\r\n            remark:'',\r\n            id:''\r\n         } ,\r\n            dialog:{\r\n                show:false,\r\n                title:\"\",\r\n                option:\"edit\"\r\n            }\r\n        };\r\n    },\r\n    computed:{\r\n        user(){\r\n            return  this.$store.getters.user;\r\n        }\r\n    },\r\n    components:{\r\n     DialogFound\r\n    },\r\n    created(){\r\n        this.getProfile();\r\n    },\r\n    methods:{\r\n    getProfile(){\r\n        //获取表格数据\r\n        this.$axios.get('/api/profiles')\r\n        .then(res=>{\r\n             this.allTableData=res.data;\r\n             this.filerTableData=res.data;\r\n             //设置分页数据\r\n             this.setPaginations();\r\n            //console.log(res)\r\n        })\r\n        .catch(err=>console.log(err));\r\n    },\r\n    handleEdit(index,row){\r\n        //编辑\r\n        this.dialog={\r\n            show:true,\r\n            title:\"修改基金信息\",\r\n            option:'edit'\r\n        }\r\n        this.formData={\r\n\r\n            type:row.type,\r\n            describe:row.describe,\r\n            income:row.income,\r\n            expend:row.expend,\r\n            cash:row.cash,\r\n            remark:row.remark,\r\n            id:row._id\r\n\r\n        }\r\n\r\n    },\r\n    handleDelete(index,row){\r\n        this.$axios.delete(`api/profiles/delete/${row._id}`).then((result)=>{\r\n                this.$message('删除成功');\r\n                this.getProfile();\r\n\r\n        })\r\n\r\n    },\r\n    AddMoney(){\r\n         this.dialog={\r\n            show:true,\r\n            title:\"添加基金信息\",\r\n            option:'add'\r\n        },\r\n        this.formData={\r\n\r\n            type:\"\",\r\n            describe:\"\",\r\n            income:\"\",\r\n            expend:\"\",\r\n            cash:\"\",\r\n            remark:\"\",\r\n            id:\"\"\r\n\r\n        }\r\n    },\r\n    handleSizeChange(page_size){\r\n        //切换size\r\n        this.paginations.page_index=1;\r\n        this.paginations.page_size=page_size;\r\n         this.tableData=this.allTableData.filter((item,index)=>{\r\n            return index <page_size;\r\n        })\r\n    },\r\n    handleCurrentChange(page){\r\n        //获取当前页\r\n        let index=this.paginations.page_size*(page-1);\r\n        //数据总数\r\n        let nums=this.paginations.page_size*page;\r\n        let tables=[];\r\n        for (let i =index;i<nums;i++){\r\n\r\n            if(this.allTableData[i]){\r\n                tables.push(this.allTableData[i]);\r\n            }\r\n            this.tableData=tables;\r\n        }\r\n    },\r\n    setPaginations(){\r\n        //分页属性设置\r\n        this.paginations.total=this.allTableData.length;\r\n        this.paginations.page_index=1;\r\n        this.paginations.page_size=5;\r\n        //设置默认分页数据\r\n        this.tableData=this.allTableData.filter((item,index)=>{\r\n            return index <this.paginations.page_size;\r\n        })\r\n\r\n    },\r\n    handleSearch(){\r\n        if(!this.search_data.startTime||!this.search_data.endTime){\r\n            this.$message({\r\n                type:\"warning\",\r\n                message:\"请选择时间区间\"\r\n            })\r\n            this.getProfile();\r\n            return;\r\n        };\r\n        const sTime=this.search_data.startTime.getTime();\r\n        const eTime=this.search_data.endTime.getTime();\r\n\r\n        this.allTableData=this.filerTableData.filter(item=>{\r\n\r\n            let date=new Date(item.date);\r\n            let  time=date.getTime();\r\n            return time >=sTime && time<=eTime;\r\n        });\r\n        //分页数据调用\r\n        this.setPaginations();\r\n\r\n    }\r\n    }\r\n    \r\n\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n.fillcontain {\r\n  width: 100%;\r\n  height: 100%;\r\n  padding: 16px;\r\n  box-sizing: border-box;\r\n}\r\n/* .btnRight {\r\n  /* float: right; */\r\n/* }  */\r\n.pagination {\r\n  text-align: center;\r\n  margin-top: 10px;\r\n}\r\n</style>\r\n\r\n"]}]}